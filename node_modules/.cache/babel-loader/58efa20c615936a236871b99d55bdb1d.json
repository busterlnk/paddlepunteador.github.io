{"ast":null,"code":"import { createElement, Fragment, Component, PureComponent, createContext } from 'react';\nimport memoize from 'lodash/memoize';\nimport { renderAndAddProps } from 'render-and-add-props';\nimport produce$1, { produce } from 'immer';\nimport sortBy from 'lodash/sortBy';\nimport keys from 'lodash/keys';\nimport set from 'lodash/set';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar firebaseDatabaseDefaultContext = {\n  firebase: {}\n};\nvar getContext = memoize(function (createContext$$1) {\n  if (createContext$$1 === void 0) {\n    createContext$$1 = function (defaultContext) {\n      return createContext(defaultContext);\n    };\n  }\n\n  var _a = createContext$$1(firebaseDatabaseDefaultContext),\n      FirebaseDatabaseContextProvider = _a.Provider,\n      FirebaseDatabaseContextConsumer = _a.Consumer;\n\n  return {\n    FirebaseDatabaseContextProvider: FirebaseDatabaseContextProvider,\n    FirebaseDatabaseContextConsumer: FirebaseDatabaseContextConsumer\n  };\n}, function () {\n  return 1;\n});\n\nvar initializeFirebaseApp = function (_a) {\n  var firebase = _a.firebase,\n      authDomain = _a.authDomain,\n      databaseURL = _a.databaseURL,\n      projectId = _a.projectId,\n      storageBucket = _a.storageBucket,\n      messagingSenderId = _a.messagingSenderId,\n      apiKey = _a.apiKey,\n      appId = _a.appId,\n      measurementId = _a.measurementId;\n\n  try {\n    firebase.initializeApp({\n      apiKey: apiKey,\n      authDomain: authDomain,\n      databaseURL: databaseURL,\n      projectId: projectId,\n      storageBucket: storageBucket,\n      messagingSenderId: messagingSenderId,\n      appId: appId,\n      measurementId: measurementId\n    });\n  } catch (err) {\n    if (err.code !== \"app/duplicate-app\") {\n      throw err;\n    }\n  }\n};\n\nvar FirebaseDatabaseProvider = function (_super) {\n  __extends(FirebaseDatabaseProvider, _super);\n\n  function FirebaseDatabaseProvider(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.__isMounted = true;\n    _this.state = {\n      firebase: props.firebase\n    };\n\n    if (_this.props.apiKey) {\n      initializeFirebaseApp(_this.props);\n    }\n\n    return _this;\n  }\n\n  FirebaseDatabaseProvider.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        createContext$$1 = _a.createContext;\n    var FirebaseDatabaseContextProvider = getContext(createContext$$1).FirebaseDatabaseContextProvider;\n    return createElement(FirebaseDatabaseContextProvider, {\n      value: this.state\n    }, renderAndAddProps(children, {}));\n  };\n\n  return FirebaseDatabaseProvider;\n}(Component);\n\nvar getFirebaseQuery = function (_a) {\n  var _b = _a.firebase,\n      firebase = _b === void 0 ? null : _b,\n      path = _a.path,\n      _c = _a.orderByChild,\n      orderByChild = _c === void 0 ? null : _c,\n      _d = _a.orderByKey,\n      orderByKey = _d === void 0 ? null : _d,\n      _e = _a.orderByValue,\n      orderByValue = _e === void 0 ? null : _e,\n      _f = _a.limitToFirst,\n      limitToFirst = _f === void 0 ? null : _f,\n      _g = _a.limitToLast,\n      limitToLast = _g === void 0 ? null : _g,\n      _h = _a.startAt,\n      startAt = _h === void 0 ? null : _h,\n      _j = _a.endAt,\n      endAt = _j === void 0 ? null : _j,\n      _k = _a.equalTo,\n      equalTo = _k === void 0 ? null : _k;\n\n  if (firebase === null) {\n    throw new Error(\"Need to supply firebase argument to getFirebaseQuery\");\n  }\n\n  if (path === null || typeof path === \"undefined\") {\n    throw new Error(\"Need to supply path argument to getFirebaseQuery\");\n  }\n\n  var result = firebase.database().ref(path);\n\n  if (orderByChild !== null) {\n    result = result.orderByChild(orderByChild);\n  }\n\n  if (orderByKey !== null) {\n    result = result.orderByKey();\n  }\n\n  if (orderByValue !== null) {\n    result = result.orderByValue();\n  }\n\n  if (limitToFirst !== null) {\n    result = result.limitToFirst(limitToFirst);\n  }\n\n  if (limitToLast !== null) {\n    result = result.limitToLast(limitToLast);\n  }\n\n  if (startAt !== null) {\n    result = result.startAt(startAt);\n  }\n\n  if (endAt !== null) {\n    result = result.endAt(endAt);\n  }\n\n  if (equalTo !== null) {\n    result = result.equalTo(equalTo);\n  }\n\n  return result;\n};\n\nvar dataNodeProps = [\"firebase\", \"path\", \"orderByChild\", \"orderByKey\", \"orderByValue\", \"limitToFirst\", \"limitToLast\", \"startAt\", \"endAt\", \"equalTo\", \"keysOnly\", \"once\", \"isList\", \"unsub\"];\n\nvar getPropsOrNull = function (props) {\n  var cleanProps = {};\n\n  for (var _i = 0, dataNodeProps_1 = dataNodeProps; _i < dataNodeProps_1.length; _i++) {\n    var propName = dataNodeProps_1[_i];\n\n    if (props[propName]) {\n      cleanProps[propName] = props[propName];\n    } else {\n      cleanProps[propName] = null;\n    }\n  }\n\n  return cleanProps;\n};\n\nvar havePropsChanged = function (prevProps, props) {\n  for (var _i = 0, dataNodeProps_2 = dataNodeProps; _i < dataNodeProps_2.length; _i++) {\n    var propName = dataNodeProps_2[_i];\n\n    if (props[propName] !== prevProps[propName]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar hasStateChanged = function (prevState, state) {\n  var keysICareAbout = [\"firebase\", \"value\", \"isLoading\", \"path\"];\n\n  for (var _i = 0, keysICareAbout_1 = keysICareAbout; _i < keysICareAbout_1.length; _i++) {\n    var propName = keysICareAbout_1[_i];\n\n    if (state[propName] !== prevState[propName]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar reducers = {\n  setIsLoading: function (isLoading) {\n    return function (state) {\n      return produce(state, function (draft) {\n        draft.isLoading = isLoading;\n      });\n    };\n  },\n  setValue: function (value) {\n    return function (state) {\n      return produce(state, function (draft) {\n        draft.value = value;\n      });\n    };\n  },\n  setPath: function (path) {\n    return function (state) {\n      return produce(state, function (draft) {\n        draft.path = path;\n      });\n    };\n  },\n  addKeyToList: function (key) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [key];\n          return;\n        }\n\n        draft.value = draft.value.filter(function (k) {\n          return k !== key;\n        }).concat([key]);\n      });\n    };\n  },\n  removeKeyFromList: function (key) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [];\n          return;\n        }\n\n        draft.value = draft.value.filter(function (k) {\n          return k !== key;\n        });\n      });\n    };\n  },\n  addToList: function (value, key, order) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [{\n            data: value,\n            key: key,\n            order: order\n          }];\n          return;\n        }\n\n        var orderedList = draft.value.filter(function (v) {\n          return v.key !== key;\n        }).concat([{\n          data: value,\n          key: key,\n          order: order\n        }]);\n        draft.value = orderedList.sort(function (a, b) {\n          return a.order - b.order;\n        });\n      });\n    };\n  },\n  removeFromList: function (value, key) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [];\n          return;\n        }\n\n        draft.value = draft.value.filter(function (v) {\n          return v.key !== key;\n        });\n      });\n    };\n  },\n  removeFirstFromList: function (count) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [];\n          return;\n        }\n\n        var arrayLength = draft.value.length;\n        draft.value = draft.value.slice(arrayLength - count, arrayLength - 1);\n      });\n    };\n  },\n  removeLastFromList: function (count) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [];\n          return;\n        }\n\n        var arrayLength = draft.value.length;\n        draft.value = draft.value.slice(0, arrayLength - count);\n      });\n    };\n  },\n  prependKeyToList: function (key) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [key];\n          return;\n        }\n\n        draft.value = [key].concat(draft.value.filter(function (k) {\n          return k !== key;\n        }));\n      });\n    };\n  },\n  prependToList: function (value, key) {\n    return function (state) {\n      return produce(state, function (draft) {\n        if (!Array.isArray(draft.value)) {\n          draft.value = [{\n            data: value,\n            key: key\n          }];\n          return;\n        }\n\n        draft.value = [{\n          data: value,\n          key: key\n        }].concat(draft.value.filter(function (v) {\n          return v.key !== key;\n        }));\n      });\n    };\n  }\n};\n\nvar FirebaseDatabaseContextConsumerLifeCycle = function (_super) {\n  __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\n\n  function FirebaseDatabaseContextConsumerLifeCycle() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      firebase: null,\n      path: null,\n      orderByChild: null,\n      orderByKey: null,\n      orderByValue: null,\n      limitToFirst: null,\n      limitToLast: null,\n      startAt: null,\n      endAt: null,\n      equalTo: null,\n      keysOnly: null,\n      once: null,\n      isList: null,\n      unsub: null,\n      value: null,\n      isLoading: null\n    };\n    _this.__isMounted = false;\n\n    _this.ss = function () {\n      if (_this.__isMounted === false) {\n        return function () {};\n      }\n\n      return _this.setState.bind(_this);\n    };\n\n    _this.onValue = function (props, v) {\n      if (!v) return;\n      if (v.val() === null) return;\n      var value = v.val();\n      var keysOnly = props.keysOnly,\n          isList = props.isList,\n          orderByChild = props.orderByChild,\n          orderByKey = props.orderByKey,\n          orderByValue = props.orderByValue;\n\n      if (!keysOnly && !isList) {\n        _this.ss()(reducers.setValue(value));\n\n        return;\n      }\n\n      var unsortedKeys = keys(value);\n      var sortedKeys = orderByChild ? sortBy(unsortedKeys, function (key) {\n        return value[key][orderByChild];\n      }) : orderByKey ? sortBy(unsortedKeys, function (key) {\n        return key;\n      }) : orderByValue ? sortBy(unsortedKeys, function (key) {\n        return value[key];\n      }) : unsortedKeys;\n\n      if (keysOnly) {\n        _this.ss()(reducers.setValue(sortedKeys));\n\n        return;\n      }\n\n      if (isList) {\n        var val = sortedKeys.map(function (key) {\n          return {\n            key: key,\n            data: value[key]\n          };\n        });\n\n        _this.ss()(reducers.setValue(val));\n\n        return;\n      } else {\n        _this.ss()(reducers.setValue(value));\n\n        return;\n      }\n    };\n\n    _this.handleOnce = function (props, ref) {\n      _this.ss()(reducers.setIsLoading(true));\n\n      ref.once(\"value\", function (v) {\n        _this.ss()(reducers.setIsLoading(false));\n\n        _this.onValue(props, v);\n      });\n    };\n\n    _this.handleOn = function (props, ref) {\n      _this.unsub && _this.unsub();\n\n      _this.ss()(reducers.setIsLoading(true));\n\n      _this.unsub = ref.on(\"value\", function (v) {\n        _this.ss()(reducers.setIsLoading(false));\n\n        _this.onValue(props, v);\n      });\n    };\n\n    _this.listenToRef = function (props) {\n      var propsOrNull = getPropsOrNull(_this.props);\n      var firebase = propsOrNull.firebase,\n          path = propsOrNull.path;\n\n      if (firebase === null) {\n        return;\n      }\n\n      if (path === null) {\n        return;\n      }\n\n      _this.ss()(reducers.setPath(path));\n\n      _this.ss()(reducers.setIsLoading(true));\n\n      var query = getFirebaseQuery(propsOrNull);\n\n      if (propsOrNull.once) {\n        _this.handleOnce(props, query);\n      } else {\n        _this.handleOn(props, query);\n      }\n    };\n\n    return _this;\n  }\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\n    this.__isMounted = true;\n    this.listenToRef(getPropsOrNull(this.props));\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function (prevProps) {\n    if (havePropsChanged(this.props, prevProps)) {\n      this.listenToRef(getPropsOrNull(this.props));\n    }\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\n    this.__isMounted = false;\n    this.unsub && this.unsub();\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return havePropsChanged(this.props, nextProps) || hasStateChanged(this.state, nextState);\n  };\n\n  FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\n    var _a = this.state,\n        path = _a.path,\n        value = _a.value,\n        isLoading = _a.isLoading;\n    return renderAndAddProps(this.props.children, {\n      path: path,\n      value: value,\n      isLoading: isLoading\n    });\n  };\n\n  return FirebaseDatabaseContextConsumerLifeCycle;\n}(Component);\n\nvar FirebaseDatabaseNode = function (_super) {\n  __extends(FirebaseDatabaseNode, _super);\n\n  function FirebaseDatabaseNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseNode.prototype.render = function () {\n    var _this = this;\n\n    var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(Fragment, null, createElement(FirebaseDatabaseContextConsumerLifeCycle, __assign({\n        firebase: context.firebase\n      }, _this.props)));\n    });\n  };\n\n  return FirebaseDatabaseNode;\n}(Component);\n\nvar initialState = {\n  isLoading: true,\n  value: {}\n};\n\nvar addNodeToState = function (state, _a) {\n  var id = _a.id,\n      value = _a.value,\n      isLoading = _a.isLoading;\n  var updatedState = produce$1(state, function (newState) {\n    set(newState, \"value.\" + id + \".value\", value);\n    set(newState, \"value.\" + id + \".isLoading\", isLoading);\n    return newState;\n  });\n  return updatedState;\n};\n\nvar PureNodeReader = function (_super) {\n  __extends(PureNodeReader, _super);\n\n  function PureNodeReader() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PureNodeReader.prototype.componentDidMount = function () {\n    var _a = this.props,\n        id = _a.id,\n        value = _a.value,\n        isLoading = _a.isLoading,\n        onChange = _a.onChange;\n    onChange({\n      id: id,\n      value: value,\n      isLoading: isLoading,\n      onChange: onChange\n    });\n  };\n\n  PureNodeReader.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        id = _a.id,\n        value = _a.value,\n        isLoading = _a.isLoading,\n        onChange = _a.onChange;\n    onChange({\n      id: id,\n      value: value,\n      isLoading: isLoading,\n      onChange: onChange\n    });\n  };\n\n  PureNodeReader.prototype.shouldComponentUpdate = function (prevProps) {\n    var _a = this.props,\n        id = _a.id,\n        value = _a.value,\n        isLoading = _a.isLoading,\n        onChange = _a.onChange;\n    return prevProps.id !== id || prevProps.value !== value || prevProps.isLoading !== isLoading;\n  };\n\n  PureNodeReader.prototype.render = function () {\n    return null;\n  };\n\n  return PureNodeReader;\n}(Component);\n\nvar FirebaseDatabaseNodes = function (_super) {\n  __extends(FirebaseDatabaseNodes, _super);\n\n  function FirebaseDatabaseNodes() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = initialState;\n    return _this;\n  }\n\n  FirebaseDatabaseNodes.prototype.componentDidMount = function () {\n    var _loop_1 = function (node) {\n      var id = node.id;\n      this_1.setState(function (state) {\n        return addNodeToState(state, {\n          id: id,\n          value: null,\n          isLoading: true\n        });\n      });\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = this.props.nodes; _i < _a.length; _i++) {\n      var node = _a[_i];\n\n      _loop_1(node);\n    }\n  };\n\n  FirebaseDatabaseNodes.prototype.componentDidUpdate = function () {\n    var nodeIDs = this.props.nodes.map(function (n) {\n      return n.id;\n    });\n\n    var _loop_2 = function (nodeID) {\n      if (!(nodeID in this_2.state.value)) {\n        this_2.setState(function (state) {\n          return addNodeToState(state, {\n            id: nodeID,\n            value: null,\n            isLoading: true\n          });\n        });\n      }\n    };\n\n    var this_2 = this;\n\n    for (var _i = 0, nodeIDs_1 = nodeIDs; _i < nodeIDs_1.length; _i++) {\n      var nodeID = nodeIDs_1[_i];\n\n      _loop_2(nodeID);\n    }\n  };\n\n  FirebaseDatabaseNodes.prototype.render = function () {\n    var _this = this;\n\n    return createElement(Fragment, null, this.props.nodes.map(function (node) {\n      return createElement(FirebaseDatabaseNode, __assign({\n        path: node.path,\n        key: node.id\n      }, node.query), function (_a) {\n        var value = _a.value,\n            isLoading = _a.isLoading;\n        return createElement(PureNodeReader, {\n          value: value,\n          isLoading: isLoading,\n          id: node.id,\n          onChange: function (_a) {\n            var id = _a.id,\n                value = _a.value,\n                isLoading = _a.isLoading;\n\n            _this.setState(function (state) {\n              return addNodeToState(state, {\n                id: id,\n                value: value,\n                isLoading: isLoading\n              });\n            });\n          }\n        });\n      });\n    }), renderAndAddProps(this.props.children, this.state));\n  };\n\n  return FirebaseDatabaseNodes;\n}(PureComponent);\n\nvar FirebaseDatabaseMutationWithContext = function (_super) {\n  __extends(FirebaseDatabaseMutationWithContext, _super);\n\n  function FirebaseDatabaseMutationWithContext() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.createMutationRunner = function () {\n      var _a = _this.props,\n          firebase = _a.firebase,\n          path = _a.path,\n          type = _a.type;\n      var firebaseRef = firebase.app().database().ref(path);\n      var runMutation;\n\n      switch (type) {\n        case \"push\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                var key;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.push(value).key];\n\n                    case 1:\n                      key = _a.sent();\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: key\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        case \"update\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.update(value)];\n\n                    case 1:\n                      _a.sent();\n\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: null\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        case \"set\":\n          {\n            runMutation = function (value) {\n              return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4, firebaseRef.set(value)];\n\n                    case 1:\n                      _a.sent();\n\n                      return [2, {\n                        path: path,\n                        value: value,\n                        type: type,\n                        key: null\n                      }];\n                  }\n                });\n              });\n            };\n\n            break;\n          }\n\n        default:\n          {\n            throw new Error(\"Unsupported mutation type \" + type + \". \\nPlease file an issue if you'd like to see us support it !\");\n          }\n      }\n\n      return runMutation;\n    };\n\n    return _this;\n  }\n\n  FirebaseDatabaseMutationWithContext.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.path !== this.props.path || nextProps.firebase !== this.props.firebase;\n  };\n\n  FirebaseDatabaseMutationWithContext.prototype.render = function () {\n    var children = this.props.children;\n    var runMutation = this.createMutationRunner();\n    return renderAndAddProps(children, __assign({\n      runMutation: runMutation\n    }, this.props));\n  };\n\n  return FirebaseDatabaseMutationWithContext;\n}(Component);\n\nvar FirebaseDatabaseMutation = function (_super) {\n  __extends(FirebaseDatabaseMutation, _super);\n\n  function FirebaseDatabaseMutation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseMutation.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        type = _a.type,\n        path = _a.path;\n    var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(FirebaseDatabaseMutationWithContext, __assign({\n        type: type,\n        path: path\n      }, context, {\n        children: children\n      }));\n    });\n  };\n\n  return FirebaseDatabaseMutation;\n}(Component);\n\nvar FirebaseDatabaseTransactionWithContext = function (_super) {\n  __extends(FirebaseDatabaseTransactionWithContext, _super);\n\n  function FirebaseDatabaseTransactionWithContext() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.createTransactionRunner = function () {\n      var _a = _this.props,\n          firebase = _a.firebase,\n          path = _a.path;\n      var firebaseRef = firebase.app().database().ref(path);\n\n      var runTransaction = function (_a) {\n        var reducer = _a.reducer;\n        return __awaiter(_this, void 0, void 0, function () {\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                return [4, firebaseRef.transaction(reducer)];\n\n              case 1:\n                _b.sent();\n\n                return [2, {\n                  path: path\n                }];\n            }\n          });\n        });\n      };\n\n      return runTransaction;\n    };\n\n    return _this;\n  }\n\n  FirebaseDatabaseTransactionWithContext.prototype.shouldComponentUpdate = function (nextProps) {\n    return nextProps.path !== this.props.path || nextProps.firebase !== this.props.firebase;\n  };\n\n  FirebaseDatabaseTransactionWithContext.prototype.render = function () {\n    var children = this.props.children;\n    var runTransaction = this.createTransactionRunner();\n    return renderAndAddProps(children, __assign({\n      runTransaction: runTransaction\n    }, this.props));\n  };\n\n  return FirebaseDatabaseTransactionWithContext;\n}(Component);\n\nvar FirebaseDatabaseTransaction = function (_super) {\n  __extends(FirebaseDatabaseTransaction, _super);\n\n  function FirebaseDatabaseTransaction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FirebaseDatabaseTransaction.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        path = _a.path;\n    var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\n    return createElement(FirebaseDatabaseContextConsumer, null, function (context) {\n      return createElement(FirebaseDatabaseTransactionWithContext, __assign({\n        path: path\n      }, context, {\n        children: children\n      }));\n    });\n  };\n\n  return FirebaseDatabaseTransaction;\n}(Component);\n\nexport { FirebaseDatabaseNode, FirebaseDatabaseNodes, FirebaseDatabaseProvider, FirebaseDatabaseMutation, FirebaseDatabaseTransaction, getFirebaseQuery, initializeFirebaseApp };","map":{"version":3,"names":["createElement","Fragment","Component","PureComponent","createContext","memoize","renderAndAddProps","produce$1","produce","sortBy","keys","set","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","firebaseDatabaseDefaultContext","firebase","getContext","createContext$$1","defaultContext","_a","FirebaseDatabaseContextProvider","Provider","FirebaseDatabaseContextConsumer","Consumer","initializeFirebaseApp","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","apiKey","appId","measurementId","initializeApp","err","code","FirebaseDatabaseProvider","_super","props","_this","__isMounted","state","render","children","getFirebaseQuery","_b","path","_c","orderByChild","_d","orderByKey","_e","orderByValue","_f","limitToFirst","_g","limitToLast","_h","startAt","_j","endAt","_k","equalTo","Error","database","ref","dataNodeProps","getPropsOrNull","cleanProps","_i","dataNodeProps_1","propName","havePropsChanged","prevProps","dataNodeProps_2","hasStateChanged","prevState","keysICareAbout","keysICareAbout_1","reducers","setIsLoading","isLoading","draft","setValue","setPath","addKeyToList","key","isArray","filter","k","concat","removeKeyFromList","addToList","order","data","orderedList","sort","a","removeFromList","removeFirstFromList","count","arrayLength","slice","removeLastFromList","prependKeyToList","prependToList","FirebaseDatabaseContextConsumerLifeCycle","keysOnly","once","isList","unsub","ss","setState","bind","onValue","val","unsortedKeys","sortedKeys","map","handleOnce","handleOn","on","listenToRef","propsOrNull","query","componentDidMount","componentDidUpdate","componentWillUnmount","shouldComponentUpdate","nextProps","nextState","FirebaseDatabaseNode","context","initialState","addNodeToState","id","updatedState","newState","PureNodeReader","onChange","FirebaseDatabaseNodes","_loop_1","node","this_1","nodes","nodeIDs","_loop_2","nodeID","this_2","nodeIDs_1","FirebaseDatabaseMutationWithContext","createMutationRunner","type","firebaseRef","app","runMutation","update","FirebaseDatabaseMutation","FirebaseDatabaseTransactionWithContext","createTransactionRunner","runTransaction","reducer","transaction","FirebaseDatabaseTransaction"],"sources":["C:/Users/FranS/Documents/GitHub/paddlepunteador.github.io/node_modules/@react-firebase/database/dist/index.esm.js"],"sourcesContent":["import { createElement, Fragment, Component, PureComponent, createContext } from 'react';\nimport memoize from 'lodash/memoize';\nimport { renderAndAddProps } from 'render-and-add-props';\nimport produce$1, { produce } from 'immer';\nimport sortBy from 'lodash/sortBy';\nimport keys from 'lodash/keys';\nimport set from 'lodash/set';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar firebaseDatabaseDefaultContext = {\r\n    firebase: {}\r\n};\r\nvar getContext = memoize(function (createContext$$1) {\r\n    if (createContext$$1 === void 0) { createContext$$1 = function (defaultContext) {\r\n        return createContext(defaultContext);\r\n    }; }\r\n    var _a = createContext$$1(firebaseDatabaseDefaultContext), FirebaseDatabaseContextProvider = _a.Provider, FirebaseDatabaseContextConsumer = _a.Consumer;\r\n    return {\r\n        FirebaseDatabaseContextProvider: FirebaseDatabaseContextProvider,\r\n        FirebaseDatabaseContextConsumer: FirebaseDatabaseContextConsumer\r\n    };\r\n}, function () { return 1; });\n\nvar initializeFirebaseApp = function (_a) {\r\n    var firebase = _a.firebase, authDomain = _a.authDomain, databaseURL = _a.databaseURL, projectId = _a.projectId, storageBucket = _a.storageBucket, messagingSenderId = _a.messagingSenderId, apiKey = _a.apiKey, appId = _a.appId, measurementId = _a.measurementId;\r\n    try {\r\n        firebase.initializeApp({\r\n            apiKey: apiKey,\r\n            authDomain: authDomain,\r\n            databaseURL: databaseURL,\r\n            projectId: projectId,\r\n            storageBucket: storageBucket,\r\n            messagingSenderId: messagingSenderId,\r\n            appId: appId,\r\n            measurementId: measurementId\r\n        });\r\n    }\r\n    catch (err) {\r\n        if (err.code !== \"app/duplicate-app\") {\r\n            throw err;\r\n        }\r\n    }\r\n};\n\nvar FirebaseDatabaseProvider = (function (_super) {\r\n    __extends(FirebaseDatabaseProvider, _super);\r\n    function FirebaseDatabaseProvider(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.__isMounted = true;\r\n        _this.state = {\r\n            firebase: props.firebase\r\n        };\r\n        if (_this.props.apiKey) {\r\n            initializeFirebaseApp(_this.props);\r\n        }\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseProvider.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, createContext$$1 = _a.createContext;\r\n        var FirebaseDatabaseContextProvider = getContext(createContext$$1).FirebaseDatabaseContextProvider;\r\n        return (createElement(FirebaseDatabaseContextProvider, { value: this.state }, renderAndAddProps(children, {})));\r\n    };\r\n    return FirebaseDatabaseProvider;\r\n}(Component));\n\nvar getFirebaseQuery = function (_a) {\r\n    var _b = _a.firebase, firebase = _b === void 0 ? null : _b, path = _a.path, _c = _a.orderByChild, orderByChild = _c === void 0 ? null : _c, _d = _a.orderByKey, orderByKey = _d === void 0 ? null : _d, _e = _a.orderByValue, orderByValue = _e === void 0 ? null : _e, _f = _a.limitToFirst, limitToFirst = _f === void 0 ? null : _f, _g = _a.limitToLast, limitToLast = _g === void 0 ? null : _g, _h = _a.startAt, startAt = _h === void 0 ? null : _h, _j = _a.endAt, endAt = _j === void 0 ? null : _j, _k = _a.equalTo, equalTo = _k === void 0 ? null : _k;\r\n    if (firebase === null) {\r\n        throw new Error(\"Need to supply firebase argument to getFirebaseQuery\");\r\n    }\r\n    if (path === null || typeof path === \"undefined\") {\r\n        throw new Error(\"Need to supply path argument to getFirebaseQuery\");\r\n    }\r\n    var result = firebase.database().ref(path);\r\n    if (orderByChild !== null) {\r\n        result = result.orderByChild(orderByChild);\r\n    }\r\n    if (orderByKey !== null) {\r\n        result = result.orderByKey();\r\n    }\r\n    if (orderByValue !== null) {\r\n        result = result.orderByValue();\r\n    }\r\n    if (limitToFirst !== null) {\r\n        result = result.limitToFirst(limitToFirst);\r\n    }\r\n    if (limitToLast !== null) {\r\n        result = result.limitToLast(limitToLast);\r\n    }\r\n    if (startAt !== null) {\r\n        result = result.startAt(startAt);\r\n    }\r\n    if (endAt !== null) {\r\n        result = result.endAt(endAt);\r\n    }\r\n    if (equalTo !== null) {\r\n        result = result.equalTo(equalTo);\r\n    }\r\n    return result;\r\n};\n\nvar dataNodeProps = [\r\n    \"firebase\",\r\n    \"path\",\r\n    \"orderByChild\",\r\n    \"orderByKey\",\r\n    \"orderByValue\",\r\n    \"limitToFirst\",\r\n    \"limitToLast\",\r\n    \"startAt\",\r\n    \"endAt\",\r\n    \"equalTo\",\r\n    \"keysOnly\",\r\n    \"once\",\r\n    \"isList\",\r\n    \"unsub\"\r\n];\r\nvar getPropsOrNull = function (props) {\r\n    var cleanProps = {};\r\n    for (var _i = 0, dataNodeProps_1 = dataNodeProps; _i < dataNodeProps_1.length; _i++) {\r\n        var propName = dataNodeProps_1[_i];\r\n        if (props[propName]) {\r\n            cleanProps[propName] = props[propName];\r\n        }\r\n        else {\r\n            cleanProps[propName] = null;\r\n        }\r\n    }\r\n    return cleanProps;\r\n};\r\nvar havePropsChanged = function (prevProps, props) {\r\n    for (var _i = 0, dataNodeProps_2 = dataNodeProps; _i < dataNodeProps_2.length; _i++) {\r\n        var propName = dataNodeProps_2[_i];\r\n        if (props[propName] !== prevProps[propName]) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\nvar hasStateChanged = function (prevState, state) {\r\n    var keysICareAbout = [\"firebase\", \"value\", \"isLoading\", \"path\"];\r\n    for (var _i = 0, keysICareAbout_1 = keysICareAbout; _i < keysICareAbout_1.length; _i++) {\r\n        var propName = keysICareAbout_1[_i];\r\n        if (state[propName] !== prevState[propName]) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\nvar reducers = {\r\n    setIsLoading: function (isLoading) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            draft.isLoading = isLoading;\r\n        });\r\n    }; },\r\n    setValue: function (value) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            draft.value = value;\r\n        });\r\n    }; },\r\n    setPath: function (path) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            draft.path = path;\r\n        });\r\n    }; },\r\n    addKeyToList: function (key) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [key];\r\n                return;\r\n            }\r\n            draft.value = draft.value.filter(function (k) { return k !== key; }).concat([key]);\r\n        });\r\n    }; },\r\n    removeKeyFromList: function (key) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [];\r\n                return;\r\n            }\r\n            draft.value = draft.value.filter(function (k) { return k !== key; });\r\n        });\r\n    }; },\r\n    addToList: function (value, key, order) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [{ data: value, key: key, order: order }];\r\n                return;\r\n            }\r\n            var orderedList = draft.value.filter(function (v) { return v.key !== key; }).concat([\r\n                { data: value, key: key, order: order }\r\n            ]);\r\n            draft.value = orderedList.sort(function (a, b) { return a.order - b.order; });\r\n        });\r\n    }; },\r\n    removeFromList: function (value, key) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [];\r\n                return;\r\n            }\r\n            draft.value = draft.value.filter(function (v) { return v.key !== key; });\r\n        });\r\n    }; },\r\n    removeFirstFromList: function (count) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [];\r\n                return;\r\n            }\r\n            var arrayLength = draft.value.length;\r\n            draft.value = draft.value.slice(arrayLength - count, arrayLength - 1);\r\n        });\r\n    }; },\r\n    removeLastFromList: function (count) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [];\r\n                return;\r\n            }\r\n            var arrayLength = draft.value.length;\r\n            draft.value = draft.value.slice(0, arrayLength - count);\r\n        });\r\n    }; },\r\n    prependKeyToList: function (key) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [key];\r\n                return;\r\n            }\r\n            draft.value = [key].concat(draft.value.filter(function (k) { return k !== key; }));\r\n        });\r\n    }; },\r\n    prependToList: function (value, key) { return function (state) {\r\n        return produce(state, function (draft) {\r\n            if (!Array.isArray(draft.value)) {\r\n                draft.value = [{ data: value, key: key }];\r\n                return;\r\n            }\r\n            draft.value = [\r\n                { data: value, key: key }\r\n            ].concat(draft.value.filter(function (v) { return v.key !== key; }));\r\n        });\r\n    }; }\r\n};\n\nvar FirebaseDatabaseContextConsumerLifeCycle = (function (_super) {\r\n    __extends(FirebaseDatabaseContextConsumerLifeCycle, _super);\r\n    function FirebaseDatabaseContextConsumerLifeCycle() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            firebase: null,\r\n            path: null,\r\n            orderByChild: null,\r\n            orderByKey: null,\r\n            orderByValue: null,\r\n            limitToFirst: null,\r\n            limitToLast: null,\r\n            startAt: null,\r\n            endAt: null,\r\n            equalTo: null,\r\n            keysOnly: null,\r\n            once: null,\r\n            isList: null,\r\n            unsub: null,\r\n            value: null,\r\n            isLoading: null\r\n        };\r\n        _this.__isMounted = false;\r\n        _this.ss = function () {\r\n            if (_this.__isMounted === false) {\r\n                return (function () { });\r\n            }\r\n            return _this.setState.bind(_this);\r\n        };\r\n        _this.onValue = function (props, v) {\r\n            if (!v)\r\n                return;\r\n            if (v.val() === null)\r\n                return;\r\n            var value = v.val();\r\n            var keysOnly = props.keysOnly, isList = props.isList, orderByChild = props.orderByChild, orderByKey = props.orderByKey, orderByValue = props.orderByValue;\r\n            if (!keysOnly && !isList) {\r\n                _this.ss()(reducers.setValue(value));\r\n                return;\r\n            }\r\n            var unsortedKeys = keys(value);\r\n            var sortedKeys = orderByChild\r\n                ? sortBy(unsortedKeys, function (key) { return value[key][orderByChild]; })\r\n                : orderByKey\r\n                    ? sortBy(unsortedKeys, function (key) { return key; })\r\n                    : orderByValue\r\n                        ? sortBy(unsortedKeys, function (key) { return value[key]; })\r\n                        : unsortedKeys;\r\n            if (keysOnly) {\r\n                _this.ss()(reducers.setValue(sortedKeys));\r\n                return;\r\n            }\r\n            if (isList) {\r\n                var val = sortedKeys.map(function (key) { return ({ key: key, data: value[key] }); });\r\n                _this.ss()(reducers.setValue(val));\r\n                return;\r\n            }\r\n            else {\r\n                _this.ss()(reducers.setValue(value));\r\n                return;\r\n            }\r\n        };\r\n        _this.handleOnce = function (props, ref) {\r\n            _this.ss()(reducers.setIsLoading(true));\r\n            ref.once(\"value\", function (v) {\r\n                _this.ss()(reducers.setIsLoading(false));\r\n                _this.onValue(props, v);\r\n            });\r\n        };\r\n        _this.handleOn = function (props, ref) {\r\n            _this.unsub && _this.unsub();\r\n            _this.ss()(reducers.setIsLoading(true));\r\n            _this.unsub = ref.on(\"value\", function (v) {\r\n                _this.ss()(reducers.setIsLoading(false));\r\n                _this.onValue(props, v);\r\n            });\r\n        };\r\n        _this.listenToRef = function (props) {\r\n            var propsOrNull = getPropsOrNull(_this.props);\r\n            var firebase = propsOrNull.firebase, path = propsOrNull.path;\r\n            if (firebase === null) {\r\n                return;\r\n            }\r\n            if (path === null) {\r\n                return;\r\n            }\r\n            _this.ss()(reducers.setPath(path));\r\n            _this.ss()(reducers.setIsLoading(true));\r\n            var query = getFirebaseQuery(propsOrNull);\r\n            if (propsOrNull.once) {\r\n                _this.handleOnce(props, query);\r\n            }\r\n            else {\r\n                _this.handleOn(props, query);\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidMount = function () {\r\n        this.__isMounted = true;\r\n        this.listenToRef(getPropsOrNull(this.props));\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentDidUpdate = function (prevProps) {\r\n        if (havePropsChanged(this.props, prevProps)) {\r\n            this.listenToRef(getPropsOrNull(this.props));\r\n        }\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.componentWillUnmount = function () {\r\n        this.__isMounted = false;\r\n        this.unsub && this.unsub();\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return (havePropsChanged(this.props, nextProps) ||\r\n            hasStateChanged(this.state, nextState));\r\n    };\r\n    FirebaseDatabaseContextConsumerLifeCycle.prototype.render = function () {\r\n        var _a = this.state, path = _a.path, value = _a.value, isLoading = _a.isLoading;\r\n        return renderAndAddProps(this.props.children, { path: path, value: value, isLoading: isLoading });\r\n    };\r\n    return FirebaseDatabaseContextConsumerLifeCycle;\r\n}(Component));\n\nvar FirebaseDatabaseNode = (function (_super) {\r\n    __extends(FirebaseDatabaseNode, _super);\r\n    function FirebaseDatabaseNode() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseNode.prototype.render = function () {\r\n        var _this = this;\r\n        var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) {\r\n            return (createElement(Fragment, null,\r\n                createElement(FirebaseDatabaseContextConsumerLifeCycle, __assign({ firebase: context.firebase }, _this.props))));\r\n        }));\r\n    };\r\n    return FirebaseDatabaseNode;\r\n}(Component));\n\nvar initialState = {\r\n    isLoading: true,\r\n    value: {}\r\n};\r\nvar addNodeToState = function (state, _a) {\r\n    var id = _a.id, value = _a.value, isLoading = _a.isLoading;\r\n    var updatedState = produce$1(state, function (newState) {\r\n        set(newState, \"value.\" + id + \".value\", value);\r\n        set(newState, \"value.\" + id + \".isLoading\", isLoading);\r\n        return newState;\r\n    });\r\n    return updatedState;\r\n};\r\nvar PureNodeReader = (function (_super) {\r\n    __extends(PureNodeReader, _super);\r\n    function PureNodeReader() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PureNodeReader.prototype.componentDidMount = function () {\r\n        var _a = this.props, id = _a.id, value = _a.value, isLoading = _a.isLoading, onChange = _a.onChange;\r\n        onChange({ id: id, value: value, isLoading: isLoading, onChange: onChange });\r\n    };\r\n    PureNodeReader.prototype.componentDidUpdate = function () {\r\n        var _a = this.props, id = _a.id, value = _a.value, isLoading = _a.isLoading, onChange = _a.onChange;\r\n        onChange({ id: id, value: value, isLoading: isLoading, onChange: onChange });\r\n    };\r\n    PureNodeReader.prototype.shouldComponentUpdate = function (prevProps) {\r\n        var _a = this.props, id = _a.id, value = _a.value, isLoading = _a.isLoading, onChange = _a.onChange;\r\n        return (prevProps.id !== id ||\r\n            prevProps.value !== value ||\r\n            prevProps.isLoading !== isLoading);\r\n    };\r\n    PureNodeReader.prototype.render = function () {\r\n        return null;\r\n    };\r\n    return PureNodeReader;\r\n}(Component));\r\nvar FirebaseDatabaseNodes = (function (_super) {\r\n    __extends(FirebaseDatabaseNodes, _super);\r\n    function FirebaseDatabaseNodes() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = initialState;\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseNodes.prototype.componentDidMount = function () {\r\n        var _loop_1 = function (node) {\r\n            var id = node.id;\r\n            this_1.setState(function (state) {\r\n                return addNodeToState(state, { id: id, value: null, isLoading: true });\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = this.props.nodes; _i < _a.length; _i++) {\r\n            var node = _a[_i];\r\n            _loop_1(node);\r\n        }\r\n    };\r\n    FirebaseDatabaseNodes.prototype.componentDidUpdate = function () {\r\n        var nodeIDs = this.props.nodes.map(function (n) { return n.id; });\r\n        var _loop_2 = function (nodeID) {\r\n            if (!(nodeID in this_2.state.value)) {\r\n                this_2.setState(function (state) {\r\n                    return addNodeToState(state, { id: nodeID, value: null, isLoading: true });\r\n                });\r\n            }\r\n        };\r\n        var this_2 = this;\r\n        for (var _i = 0, nodeIDs_1 = nodeIDs; _i < nodeIDs_1.length; _i++) {\r\n            var nodeID = nodeIDs_1[_i];\r\n            _loop_2(nodeID);\r\n        }\r\n    };\r\n    FirebaseDatabaseNodes.prototype.render = function () {\r\n        var _this = this;\r\n        return (createElement(Fragment, null,\r\n            this.props.nodes.map(function (node) { return (createElement(FirebaseDatabaseNode, __assign({ path: node.path, key: node.id }, node.query), function (_a) {\r\n                var value = _a.value, isLoading = _a.isLoading;\r\n                return (createElement(PureNodeReader, { value: value, isLoading: isLoading, id: node.id, onChange: function (_a) {\r\n                        var id = _a.id, value = _a.value, isLoading = _a.isLoading;\r\n                        _this.setState(function (state) {\r\n                            return addNodeToState(state, { id: id, value: value, isLoading: isLoading });\r\n                        });\r\n                    } }));\r\n            })); }),\r\n            renderAndAddProps(this.props.children, this.state)));\r\n    };\r\n    return FirebaseDatabaseNodes;\r\n}(PureComponent));\n\nvar FirebaseDatabaseMutationWithContext = (function (_super) {\r\n    __extends(FirebaseDatabaseMutationWithContext, _super);\r\n    function FirebaseDatabaseMutationWithContext() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.createMutationRunner = function () {\r\n            var _a = _this.props, firebase = _a.firebase, path = _a.path, type = _a.type;\r\n            var firebaseRef = firebase\r\n                .app()\r\n                .database()\r\n                .ref(path);\r\n            var runMutation;\r\n            switch (type) {\r\n                case \"push\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var key;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.push(value).key];\r\n                                case 1:\r\n                                    key = _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: key\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                case \"update\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.update(value)];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: null\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                case \"set\": {\r\n                    runMutation = function (value) { return __awaiter(_this, void 0, void 0, function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4, firebaseRef.set(value)];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2, {\r\n                                            path: path,\r\n                                            value: value,\r\n                                            type: type,\r\n                                            key: null\r\n                                        }];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    break;\r\n                }\r\n                default: {\r\n                    throw new Error(\"Unsupported mutation type \" + type + \". \\nPlease file an issue if you'd like to see us support it !\");\r\n                }\r\n            }\r\n            return runMutation;\r\n        };\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseMutationWithContext.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return (nextProps.path !== this.props.path ||\r\n            nextProps.firebase !== this.props.firebase);\r\n    };\r\n    FirebaseDatabaseMutationWithContext.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var runMutation = this.createMutationRunner();\r\n        return renderAndAddProps(children, __assign({ runMutation: runMutation }, this.props));\r\n    };\r\n    return FirebaseDatabaseMutationWithContext;\r\n}(Component));\r\nvar FirebaseDatabaseMutation = (function (_super) {\r\n    __extends(FirebaseDatabaseMutation, _super);\r\n    function FirebaseDatabaseMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseMutation.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, type = _a.type, path = _a.path;\r\n        var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) { return (createElement(FirebaseDatabaseMutationWithContext, __assign({ type: type, path: path }, context, { children: children }))); }));\r\n    };\r\n    return FirebaseDatabaseMutation;\r\n}(Component));\n\nvar FirebaseDatabaseTransactionWithContext = (function (_super) {\r\n    __extends(FirebaseDatabaseTransactionWithContext, _super);\r\n    function FirebaseDatabaseTransactionWithContext() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.createTransactionRunner = function () {\r\n            var _a = _this.props, firebase = _a.firebase, path = _a.path;\r\n            var firebaseRef = firebase\r\n                .app()\r\n                .database()\r\n                .ref(path);\r\n            var runTransaction = function (_a) {\r\n                var reducer = _a.reducer;\r\n                return __awaiter(_this, void 0, void 0, function () {\r\n                    return __generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0: return [4, firebaseRef.transaction(reducer)];\r\n                            case 1:\r\n                                _b.sent();\r\n                                return [2, { path: path }];\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n            return runTransaction;\r\n        };\r\n        return _this;\r\n    }\r\n    FirebaseDatabaseTransactionWithContext.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return (nextProps.path !== this.props.path ||\r\n            nextProps.firebase !== this.props.firebase);\r\n    };\r\n    FirebaseDatabaseTransactionWithContext.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var runTransaction = this.createTransactionRunner();\r\n        return renderAndAddProps(children, __assign({ runTransaction: runTransaction }, this.props));\r\n    };\r\n    return FirebaseDatabaseTransactionWithContext;\r\n}(Component));\r\nvar FirebaseDatabaseTransaction = (function (_super) {\r\n    __extends(FirebaseDatabaseTransaction, _super);\r\n    function FirebaseDatabaseTransaction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FirebaseDatabaseTransaction.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, path = _a.path;\r\n        var FirebaseDatabaseContextConsumer = getContext().FirebaseDatabaseContextConsumer;\r\n        return (createElement(FirebaseDatabaseContextConsumer, null, function (context) { return (createElement(FirebaseDatabaseTransactionWithContext, __assign({ path: path }, context, { children: children }))); }));\r\n    };\r\n    return FirebaseDatabaseTransaction;\r\n}(Component));\n\nexport { FirebaseDatabaseNode, FirebaseDatabaseNodes, FirebaseDatabaseProvider, FirebaseDatabaseMutation, FirebaseDatabaseTransaction, getFirebaseQuery, initializeFirebaseApp };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}